type User
@model
@aws_cognito_user_pools
@auth(
  rules:[
     {allow: owner, operations: [create, read, update,delete]}
     {allow: groups, groups: ["everyone"], operations: [read]}
  ]
){
  id:ID!
  username:String!
  owner:String!
  email:String!
  profilePicture:String
  name:String
  university:String
  createdAt:String!
  notes:[Note] @connection(name: "userNotes")
  noteMaps: [NoteMap]! @connection(name: "User")
}

type Note
  @model
  @searchable
  @key(fields: ["owner","createdAt"])
  @aws_cognito_user_pools
  @auth(
    rules: [
      {allow: owner, operations: [create, read, update, delete]}
      {allow: groups, groups: ["everyone"], operations: [read]}
    ]
  ) {
  id: ID!
  university: String
  termID: String
  department: String
  lesson: String
  description: String
  documents: [S3Object]
  documentFiles:[S3Object]
  isPrivate:Boolean
  owner: String!
  createdAt: AWSDateTime! 
  student: User @connection(name:"userNotes")
  noteMaps: [NoteMap!]! @connection(name: "Note")
}

type S3Object {
  bucket:String!
  region:String!
  key:String!
}

type NoteMap
  @model
  @aws_iam
  @aws_cognito_user_pools
  @auth(
     rules: [
      {allow: owner, operations: [create, read, update, delete]}
      {allow: groups, groups: ["everyone"], operations: [read]}
    ]
  ) {
  id: ID!
  note: Note @connection(name: "Note")
  user: User @connection(name: "User")
}